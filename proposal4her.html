<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For the love of my life üíú</title>
    <!-- Tailwind CSS para estilos r√°pidos -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;500&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            overflow: hidden;
            background-color: #f3e8ff; /* Morado muy suave */
        }

        /* --- Estilos del Sobre --- */
        .envelope-container {
            position: relative;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        .envelope-container:hover {
            transform: scale(1.02);
        }

        .envelope {
            position: relative;
            width: 300px;
            height: 200px;
            background: #d8b4fe; /* Morado medio */
            border-radius: 0 0 10px 10px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            z-index: 10;
        }

        .flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
            border-left: 150px solid transparent;
            border-right: 150px solid transparent;
            border-top: 110px solid #c084fc; /* Morado un poco m√°s oscuro */
            transform-origin: top;
            transition: transform 0.6s ease-in-out, z-index 0.2s;
            z-index: 20;
        }

        .flap.open {
            transform: rotateX(180deg);
            z-index: 5;
        }

        .pocket {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 0;
            border-left: 150px solid transparent;
            border-right: 150px solid transparent;
            border-bottom: 190px solid #e9d5ff; /* Morado claro */
            z-index: 15;
            border-radius: 0 0 10px 10px;
        }

        .letter {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 260px;
            height: 180px;
            background: white;
            border-radius: 5px;
            padding: 20px;
            transition: bottom 0.6s ease-in-out, height 0.6s ease;
            z-index: 8;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-family: 'Dancing Script', cursive;
            font-size: 1.2rem;
            color: #6b21a8;
        }

        .letter.show {
            bottom: 100px; /* Sale del sobre */
            height: 300px; /* Se hace m√°s grande */
            z-index: 30;
            transition-delay: 0.4s;
        }

        /* --- Animaci√≥n de Corazones de Fondo --- */
        .heart-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .heart {
            position: absolute;
            bottom: -20px;
            color: rgba(168, 85, 247, 0.4); /* Morado transparente */
            animation: floatUp 6s linear infinite;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) scale(0.5); opacity: 0; }
            20% { opacity: 0.8; }
            100% { transform: translateY(-100vh) scale(1.2); opacity: 0; }
        }

        /* --- Pantalla de Video --- */
        #video-container {
            opacity: 0;
            transition: opacity 1s ease;
        }

        /* --- Utilidades de Transici√≥n --- */
        .fade-out {
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.8s ease;
        }
        
        .fade-in-delayed {
            animation: fadeIn 1s ease forwards;
            animation-delay: 6s; /* Espera a que se lea la carta un poco */
            opacity: 0;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

    </style>
</head>
<body class="flex items-center justify-center h-screen w-screen bg-purple-50">

    <!-- ESCENA 1: EL SOBRE Y LA CARTA -->
    <div id="scene-envelope" class="flex flex-col items-center justify-center w-full h-full absolute transition-all duration-1000">
        <p class="mb-8 text-purple-400 font-light text-sm animate-pulse">Toca el sobre para abrirlo</p>
        
        <div class="envelope-container" onclick="openEnvelope()">
            <div class="envelope">
                <div class="flap" id="flap"></div>
                <div class="pocket"></div>
                <!-- CARTA -->
                <div class="letter" id="letter">
                    <div class="flex flex-col gap-2">
                        <p>Tu voz,</p>
                        <p class="text-sm text-gray-600 font-sans">una partitura de notas c√°lidas, la canci√≥n que reconforta mi alma</p>
                        <p class="mt-2 text-purple-600">y da vida a mis d√≠as.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ESCENA 2: LA PREGUNTA (Se superpone despu√©s) -->
    <div id="scene-question" class="hidden absolute inset-0 flex flex-col items-center justify-center z-50 bg-purple-50/90 backdrop-blur-sm">
        <!-- Fondo de corazones generado por JS -->
        <div id="hearts-container" class="heart-bg"></div>

        <div class="text-center z-10 p-6 fade-in-delayed">
            <h1 class="font-['Dancing_Script'] text-5xl md:text-7xl text-purple-600 mb-8 drop-shadow-sm">
                ¬øQuieres ser mi Valent√≠n? 
            </h1>
            
            <div class="flex gap-6 justify-center mt-8">
                <button onclick="acceptProposal()" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition hover:scale-110 duration-200 text-xl">
                    S√≠ üíú
                </button>
                <button onclick="acceptProposal()" class="bg-purple-400 hover:bg-purple-500 text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition hover:scale-110 duration-200 text-xl">
                    S√≠ ü•∞
                </button>
            </div>
        </div>
    </div>

    <!-- ESCENA 3: EL VIDEO FINAL -->
    <div id="video-container" class="fixed inset-0 bg-black z-[100] hidden items-center justify-center">
        <!-- 
             IMPORTANTE: Reemplaza 'ruta_de_tu_video.mp4' con la URL real de tu video.
             Si no tienes un video a√∫n, se mostrar√° un fondo negro.
        -->
        <video id="final-video" class="w-full h-full object-cover opacity-80" playsinline>
            <source src="video.mp4" type="video/mp4">
            Tu navegador no soporta videos.
        </video>
        
        <!-- Bot√≥n opcional para reiniciar si se desea -->
        <button onclick="location.reload()" class="absolute bottom-5 right-5 text-white/30 hover:text-white text-xs">Replay</button>
    </div>

    <script>
        let isOpened = false;

        function openEnvelope() {
            if (isOpened) return;
            isOpened = true;

            // 1. Abrir el sobre
            document.getElementById('flap').classList.add('open');
            
            // 2. Sacar la carta (con ligero retraso)
            setTimeout(() => {
                document.getElementById('letter').classList.add('show');
            }, 300);

            // 3. Transici√≥n a la escena de la pregunta
            // Esperamos 3.5 segundos para que lea la carta brevemente antes de que aparezca la pregunta
            setTimeout(() => {
                showQuestionScene();
            }, 3500);
        }

        function showQuestionScene() {
            // Desvanecer el sobre
            document.getElementById('scene-envelope').classList.add('opacity-0', 'pointer-events-none');
            
            // Mostrar contenedor de pregunta
            const questionScene = document.getElementById('scene-question');
            questionScene.classList.remove('hidden');
            
            // Iniciar lluvia de corazones
            startHearts();
        }

        function startHearts() {
            const container = document.getElementById('hearts-container');
            
            // Crear corazones cada 300ms
            setInterval(() => {
                const heart = document.createElement('div');
                heart.classList.add('heart');
                heart.innerHTML = '‚ù§';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.fontSize = (Math.random() * 20 + 20) + 'px';
                heart.style.animationDuration = (Math.random() * 3 + 3) + 's'; // Entre 3 y 6 segundos
                
                container.appendChild(heart);

                // Limpiar DOM eliminando corazones viejos
                setTimeout(() => {
                    heart.remove();
                }, 6000);
            }, 300);
        }

        function acceptProposal() {
            const videoContainer = document.getElementById('video-container');
            const videoElement = document.getElementById('final-video');
            const questionScene = document.getElementById('scene-question');

            // Ocultar pregunta
            questionScene.style.opacity = '0';
            
            // Mostrar video container
            videoContainer.classList.remove('hidden');
            
            // Peque√±o hack para forzar el reflow y que la transici√≥n de opacidad funcione
            setTimeout(() => {
                videoContainer.style.opacity = '1';
                // Intentar reproducir video
                videoElement.play().catch(e => {
                    console.log("Interacci√≥n de usuario requerida para audio, pero al hacer click en el bot√≥n deber√≠a funcionar.");
                });
                
                // Si el usuario dijo "tenue", bajamos un poco el brillo con CSS opacity-80 que ya est√° puesto
            }, 100);
        }
    </script>
</body>
</html>